# F6.T4: Tournament System

## Agent: AI_SENIOR

## Task Overview
Implement tournament-based evaluation for self-play, including ELO rating system.

## Context
Project: `src/TzarBot.Training/`. Enable self-play competition.

## Requirements

1. Create `MatchResult`:
   ```csharp
   public class MatchResult
   {
       public Guid Genome1Id { get; set; }
       public Guid Genome2Id { get; set; }
       public Guid? WinnerId { get; set; }
       public TimeSpan Duration { get; set; }
       public MatchOutcome Outcome { get; set; }
       public DateTime PlayedAt { get; set; }
   }

   public enum MatchOutcome
   {
       Genome1Win, Genome2Win, Draw, Error
   }
   ```

2. Create `EloCalculator`:
   - Calculate expected score
   - Update ratings after match
   - Configurable K-factor

3. Create interface:
   ```csharp
   public interface ITournamentManager
   {
       Task<TournamentResult> RunTournamentAsync(
           IEnumerable<NetworkGenome> participants,
           CancellationToken ct);

       IEnumerable<(Guid GenomeId, float Rating)> GetRankings();
       float GetElo(Guid genomeId);
   }
   ```

4. Implement `TournamentManager`:
   - Swiss-system pairing
   - Initialize ratings (default 1200)
   - Run matches in parallel
   - Update ELO after each match

5. Create tests:
   - Test_EloCalculation_WinnerGainsPoints
   - Test_EloCalculation_LoserLosesPoints
   - Test_SwissPairing_GroupsBySimilarRating
   - Test_Tournament_UpdatesAllRatings
   - Test_Rankings_AreCorrect

## Outputs
- `src/TzarBot.Training/Tournament/ITournamentManager.cs`
- `src/TzarBot.Training/Tournament/TournamentManager.cs`
- `src/TzarBot.Training/Tournament/EloCalculator.cs`
- `src/TzarBot.Training/Tournament/MatchResult.cs`
- `tests/TzarBot.Tests/Phase6/TournamentTests.cs`

## Test Command
```bash
dotnet test tests/TzarBot.Tests --filter "FullyQualifiedName~Phase6.Tournament"
```
