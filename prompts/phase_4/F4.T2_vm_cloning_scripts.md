# F4.T2: VM Cloning Scripts

## Agent: DEVOPS_SENIOR

## Task Overview
Create PowerShell scripts for automated VM cloning from template.

## Context
Create scripts in `scripts/vm/` directory.

## Requirements

1. Create `VMConfig.ps1` (configuration):
   ```powershell
   $VMConfig = @{
       TemplateName = "TzarBot-Template"
       TemplateVHD = "C:\VMs\TzarBot-Template.vhdx"
       WorkerPrefix = "TzarBot-Worker"
       WorkerPath = "C:\VMs\Workers"
       SwitchName = "TzarBotSwitch"
       BaseIP = "192.168.100"
       WorkerStartIP = 101
       MaxWorkers = 8
       MemoryMB = 4096
       ProcessorCount = 2
   }
   ```

2. Create `New-TzarWorkerVM.ps1`:
   - Accept worker number parameter
   - Clone VHD from template
   - Create new VM with unique name
   - Configure static IP
   - Start VM
   - Wait for boot complete

3. Create `Remove-TzarWorkerVM.ps1`:
   - Accept worker number
   - Stop VM if running
   - Remove VM
   - Delete VHD

4. Create `Start-TzarWorkers.ps1`:
   - Accept count parameter
   - Start specified number of workers
   - Parallel startup

5. Create `Stop-TzarWorkers.ps1`:
   - Stop all worker VMs
   - Wait for graceful shutdown

6. Create `Get-TzarWorkerStatus.ps1`:
   - List all workers
   - Show status, IP, memory usage
   - Return as PowerShell objects

## Outputs
- `scripts/vm/VMConfig.ps1`
- `scripts/vm/New-TzarWorkerVM.ps1`
- `scripts/vm/Remove-TzarWorkerVM.ps1`
- `scripts/vm/Start-TzarWorkers.ps1`
- `scripts/vm/Stop-TzarWorkers.ps1`
- `scripts/vm/Get-TzarWorkerStatus.ps1`

## Test Commands
```powershell
. .\scripts\vm\VMConfig.ps1
.\scripts\vm\New-TzarWorkerVM.ps1 -WorkerNumber 1
.\scripts\vm\Get-TzarWorkerStatus.ps1
.\scripts\vm\Stop-TzarWorkers.ps1
.\scripts\vm\Remove-TzarWorkerVM.ps1 -WorkerNumber 1
```
