# Task F1.T6: Phase 1 Integration & Smoke Tests

## Task ID
`F1.T6`

## Description
Create integration tests and demo application that verifies all Phase 1 components work together.

## Prerequisites
- F1.T2 (Screen Capture) completed
- F1.T3 (Input Injection) completed
- F1.T4 (IPC Named Pipes) completed
- F1.T5 (Window Detection) completed

## Instructions

### Step 1: Create Demo Application

Create `src/TzarBot.GameInterface.Demo/TzarBot.GameInterface.Demo.csproj` as console app.

Create `src/TzarBot.GameInterface.Demo/Program.cs`:

```csharp
// Demo workflow:
// 1. Find Notepad window (or Tzar if available)
// 2. Start screen capture
// 3. Start IPC server
// 4. Capture 10 frames, save first and last as PNG
// 5. Move mouse to center of window
// 6. Perform left click
// 7. Print statistics (FPS, latency)
```

### Step 2: Create Integration Tests

Create `tests/TzarBot.Tests/Phase1/IntegrationTests.cs`:

```csharp
[Collection("Integration")]
public class IntegrationTests
{
    [Fact]
    public async Task ScreenCapture_To_IPC_TransfersData()
    {
        // Start server, capture frame, send via IPC,
        // receive on client, verify data matches
    }

    [Fact]
    public void WindowDetection_And_InputInjection_WorkTogether()
    {
        // Find Notepad window, click in center,
        // type some text, verify
    }

    [Fact]
    public async Task FullLoop_CaptureDecideAct()
    {
        // Simulate full bot loop:
        // Capture -> Send to "NN" (mock) -> Receive action -> Execute
    }
}
```

### Step 3: Add Performance Metrics

Include in demo:
- Frames per second
- Capture latency
- IPC transfer time
- Total loop time

## Expected Output Files
- `tests/TzarBot.Tests/Phase1/IntegrationTests.cs`
- `src/TzarBot.GameInterface.Demo/Program.cs`
- `src/TzarBot.GameInterface.Demo/TzarBot.GameInterface.Demo.csproj`

## Validation
```bash
dotnet test tests/TzarBot.Tests --filter "FullyQualifiedName~Phase1.Integration"
dotnet run --project src/TzarBot.GameInterface.Demo
```

---
*Prompt for TzarBot Phase 1, Task 6*
